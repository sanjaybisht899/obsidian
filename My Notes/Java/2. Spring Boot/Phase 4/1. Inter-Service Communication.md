
---
## **Types of Inter-Service Communication**

### **1. Synchronous Communication (Request-Response Model)**

- One service calls another and waits for the response before continuing.
- Commonly used when an immediate response is needed.

#### **Example: REST API using Feign Client**

Let's say we have two microservices:

- `OrderService` (handles orders)
- `ProductService` (provides product details)

If `OrderService` needs product details, it can call `ProductService` using **REST API**.

```java
@FeignClient(name = "product-service", url = "http://localhost:8081")
public interface ProductClient {
    @GetMapping("/products/{id}")
    Product getProductById(@PathVariable Long id);
}
```

Now, `OrderService` can use `ProductClient` to get product details.

```java
@Service
public class OrderService {
    @Autowired
    private ProductClient productClient;

    public void placeOrder(Long productId) {
        Product product = productClient.getProductById(productId);
        System.out.println("Placing order for product: " + product.getName());
    }
}
```

### **2. Asynchronous Communication (Event-Driven Model)**

- Services do not wait for an immediate response.
- One service publishes an event, and another service listens for it.
- Useful for long-running tasks or when multiple services need to react to the same event.

#### **Example: Using Kafka for Event-Driven Communication**

Let's say `OrderService` places an order and `NotificationService` sends an email.

##### **OrderService - Publishing Event**

```java
@Autowired
private KafkaTemplate<String, String> kafkaTemplate;

public void placeOrder(String orderId) {
    System.out.println("Order placed: " + orderId);
    kafkaTemplate.send("order-topic", orderId);
}
```

##### **NotificationService - Listening for Event**

```java
@KafkaListener(topics = "order-topic", groupId = "notification-group")
public void sendNotification(String orderId) {
    System.out.println("Sending notification for order: " + orderId);
}
```

### **Choosing the Right Approach**

|Criteria|REST (Synchronous)|Kafka (Asynchronous)|
|---|---|---|
|Response Needed Immediately?|✅ Yes|❌ No|
|Decoupled Services?|❌ No|✅ Yes|
|High Load Handling?|❌ No|✅ Yes|

---

## **Conclusion**

Inter-service communication is essential in microservices.

- Use **REST APIs (synchronous)** when services need an immediate response.
- Use **Event-Driven (asynchronous)** for better scalability and loose coupling